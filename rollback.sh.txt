#!/bin/bash
 
project=$1
port=$2
version=$3
harbor_https=harbor.wmmzz.com
harbor_group=test
nowversion=`docker ps | grep  $project | awk '{print $2}' | awk   -F  ":"  '{print $2 }'`
 
 
if [ $version == $nowversion ]
then
  echo  "当前版本已经是'$version'了"
else
 
  docker stop $project
 
  docker rm $project
 
  docker run -d --name $project --restart=always --network=host  -p $port:$port  ${harbor_https}/${harbor_group}/${project}:$version
 
  echo   "当前版本为'$nowversion',已执行回滚操作，回滚版本'$version'"
fi